<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/calmine.css">
    <!-- <script src="../js/jquery-3.4.1.min.js"></script> -->
    <title>caculator</title>
</head>
<body>
    <div class='outer'>
        <table>
            <tr id='row1'>
                <td rowspan='2' colspan="4" id='screen'>0</td>
                <!-- <td></td>
                <td></td>
                <td></td> -->
            </tr>
            <tr id="row2">
                <!-- <td></td>
                <td></td>
                <td></td>
                <td></td> -->
            </tr>
            <tr>
                <td  class='buttonstyle'><button class="btn" id='btn7' onclick="NumPressed('btn7')" >7</button></td>
                <td  class='buttonstyle'><button class="btn" id='btn8' onclick="NumPressed('btn8')" >8</button></td>
                <td  class='buttonstyle'><button class="btn" id='btn9' onclick="NumPressed('btn9')" >9</button></td>
                <td  class='buttonstyle'><button class="btn" id='btn/' onclick="count('btn/')" >/</button></td>
            </tr>
            <tr>
                <td class='buttonstyle'><button class="btn" id='btn4' onclick="NumPressed('btn4')">4</button></td>
                <td class='buttonstyle'><button class="btn" id='btn5' onclick="NumPressed('btn5')" >5</button></td>
                <td class='buttonstyle'><button class="btn" id='btn6' onclick="NumPressed('btn6')" >6</button></td>
                <td class='buttonstyle'><button class="btn" id='btn*' onclick="count('btn*')" >*</button></td>
            </tr>
            <tr>
                <td class='buttonstyle'><button class="btn" id='btn1' onclick="NumPressed('btn1')" >1</button></td>
                <td class='buttonstyle'><button class="btn" id='btn2' onclick="NumPressed('btn2')" >2</button></td>
                <td class='buttonstyle'><button class="btn" id='btn3' onclick="NumPressed('btn3')" >3</button></td>
                <td class='buttonstyle'><button class="btn" id='btn+' onclick="count('btn+')" >+</button></td>
            </tr>
            <tr>
                <td class='buttonstyle'><button class="btn" id='btn0' onclick="NumPressed('btn0')" >0</button></td>
                <td class='buttonstyle'><button class="btn" id='btn.' onclick="Decimal('btn.')" >.</button></td>
                <td class='buttonstyle'><button class="btn" id='btn%'onclick="count('btn%')" >%</button></td>
                <td class='buttonstyle'><button class="btn" id='btn-' onclick="count('btn-')" >-</button></td>  
            </tr>
            <tr>
                <!-- <td class='buttonstyle'><button class="btn" id='btn0' onclick="NumPressed('btn0')" >0</button></td> -->
                <td class='buttonstyle'><button class="btn" id='btnbs' onclick="backspace()" >Del</button></td>
                <td class='buttonstyle'><button class="btn" id='btnAC'onclick="Clear()" >AC</button></td>
                <td colspan='2' class='buttonstyle'><button class="btn" id='btn=' onclick="Operation('=')" >=</button></td>  
            </tr>
        </table>
    </div>
    <script>
    
    function strip(number) {
    return (parseFloat(number.toPrecision(12)));
}
    function cal(number){
        return eval(number);
    }
    // var ans;
    // var string = document.getElementById('screen').innerText;
    // var ans = eval(string)
    function NumPressed(Num){
        var x=document.getElementById(Num).innerText;
        var s=document.getElementById('screen').innerText;
        // var y=Operation()
        // var ans1=cal(s)
        if(s!='0') {
            if (s.includes('.')){
                document.getElementById('screen').innerText=s+x[0];
            }

            else if(Number.isSafeInteger(parseFloat(s))==false){
                document.getElementById('screen').innerText=s; 
            }else if(parseInt(s.slice(s.lastIndexOf('+')+1))>=0&&Number.isSafeInteger(parseInt(s.slice(s.lastIndexOf('+')+1)))==false){
                document.getElementById('screen').innerText=s;
            }else if(parseInt(s.slice(s.lastIndexOf('-')+1))>=0&&Number.isSafeInteger(parseInt(s.slice(s.lastIndexOf('-')+1)))==false){
                document.getElementById('screen').innerText=s;
            }else if(parseInt(s.slice(s.lastIndexOf('*')+1))>=0&&Number.isSafeInteger(parseInt(s.slice(s.lastIndexOf('*')+1)))==false){
                document.getElementById('screen').innerText=s;
            }else if(parseInt(s.slice(s.lastIndexOf('/')+1))>=0&&Number.isSafeInteger(parseInt(s.slice(s.lastIndexOf('/')+1)))==false){
                document.getElementById('screen').innerText=s;
            }else if(parseInt(s.slice(s.lastIndexOf('%')+1))>=0&&Number.isSafeInteger(parseInt(s.slice(s.lastIndexOf('%')+1)))==false){
                document.getElementById('screen').innerText=s;
            }else document.getElementById('screen').innerText=s+x[0];
        // }else if ((s!='0')&&(s==ans1)){
            // document.getElementById('screen').innerText= x[0];
        // }else if(Number.isSafeInteger(parseFloat(s.substring(s.lastIndexOf('+'))))==false){
        //     document.getElementById('screen').innerText=s;

        // } else if (y){
        //     document.getElementById("screen").innerHTML = x[0];
        }
        // else if  (s=='0'){
        //      if (s=='0.'){document.getElementById('screen').innerText=s+x[0]}
            else document.getElementById("screen").innerHTML = x[0];
            
        }
    // }

    function count(num){
        var x=document.getElementById(num).innerText;
        var s=document.getElementById('screen').innerText;
        if(s=='0'){
            document.getElementById('screen').innerText='0';
        }
        else if ((parseFloat(s)>0)&&(s.charAt(s.length-1))!=='+'&&(s.charAt(s.length-1))!=='/'&&(s.charAt(s.length-1))!=='-'&&(s.charAt(s.length-1))!=='%'&&(s.charAt(s.length-1))!=='*'&&(s.charAt(s.length-1))!=='.'){
            document.getElementById('screen').innerText=s+x[0];
        // }else if (s.charAt(s.length-1)=='+'){
        //     document.getElementById('screen').innerText=s;
        // }

        }
    } 

    function Decimal(num3){
        var x=document.getElementById(num3).innerText;
        var s=document.getElementById('screen').innerText;
        if (s=='0'){
            document.getElementById('screen').innerText='0'+x[0];
        }else if ((s!=='0')&&(s.includes('.')==false)&&Number.isInteger((parseInt(s.charAt(s.length-1))))){
            document.getElementById('screen').innerText=s+x[0]
        }else if(Number.isInteger((parseInt(s.charAt(s.length-1))))&&(s.substring(s.lastIndexOf('+')).includes('.')==false)){
            document.getElementById('screen').innerText=s+x[0]
        }else if ((parseFloat(s.charAt(s.length-1))>=0)&&(s.substring(s.lastIndexOf('-')).includes('.')==false)){
                document.getElementById('screen').innerText=s+x[0]
        }else if ((parseFloat(s.charAt(s.length-1))>=0)&&(s.substring(s.lastIndexOf('*')).includes('.')==false)){
                document.getElementById('screen').innerText=s+x[0]
        }else if ((parseFloat(s.charAt(s.length-1))>=0)&&(s.substring(s.lastIndexOf('/')).includes('.')==false)){
                document.getElementById('screen').innerText=s+x[0]
        }else if ((parseFloat(s.charAt(s.length-1))>=0)&&(s.substring(s.lastIndexOf('%')).includes('.')==false)){
                document.getElementById('screen').innerText=s+x[0]
            }else document.getElementById('screen').innerText=s
            //else if(s.substring(s.lastIndexOf('*')).includes('.')==false||s.substring(s.lastIndexOf('/')).includes('.')==false){
            //     document.getElementById('screen').innerText=s+x[0]
            // }
            // s.substring(s.lastIndexOf('-')).includes('.')==false

          
                
            
        
    }
    function Clear(){
        document.getElementById('screen').innerHTML= 0;
            // document.getElementsByClassName("screen")[0].innerHTML= 0
        }

        function Operation(){
            var string = document.getElementById('screen').innerText;
            // document.getElementsByClassName('screen1')[0].innerHTML = string + "="
            var ans = cal(string)
            var stringTwo=strip(ans)
            if (string.includes('.')){
            document.getElementById('screen').innerHTML = stringTwo
            }else document.getElementById('screen').innerHTML = ans
            if(string==ans){
                document.getElementById('screen').innerHTML = '0'
            }
            
            
        }

        function backspace(){
            var string = document.getElementById('screen').innerText
            var newstring = string.slice(0,-1)
            if(string.length>1){
                document.getElementById('screen').innerHTML = newstring
            }else if(string.length=1){
                document.getElementById('screen').innerHTML = '0'
            }
            
        }
    
    var s = '0.1+'
    // console.log(parseFloat(Number.isNaN(parseFloat(s.charAt(s.length-1)))))
    console.log(Number.isSafeInteger(parseFloat(s)))
    


    // function operation(operators){
    //     document.getElementById('screen').innerText=Num+operators
    // }

    </script>
    
</body>
</html>